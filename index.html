<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <title>Game Tebak Angka</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            background: #f8f9fa;
            padding-top: 50px;
        }

        .card {
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        #spinBox {
            font-size: 80px;
            font-weight: bold;
            color: red;
            border: 5px solid #007bff;
            border-radius: 15px;
            padding: 20px 40px;
            margin: auto;
            width: 150px;
            text-align: center;
            background: #fff;
        }

        #resultSection {
            display: none;
        }
    </style>
</head>
<body>

<div class="container">
    <div class="card mx-auto" style="max-width: 600px;">
        <div class="card-body">
            <form id="gameForm">
                <div class="row mb-3">
                    <div class="col-md-7">
                        <input type="text" name="nama1" placeholder="Nama Pemain 1" class="form-control" required>
                    </div>
                    <div class="col-md-5">
                        <input type="number" name="angka1" placeholder="Tebak (1-10)" min="1" max="10" class="form-control" required>
                    </div>
                </div>
                <div class="row mb-3">
                    <div class="col-md-7">
                        <input type="text" name="nama2" placeholder="Nama Pemain 2" class="form-control" required>
                    </div>
                    <div class="col-md-5">
                        <input type="number" name="angka2" placeholder="Tebak (1-10)" min="1" max="10" class="form-control" required>
                    </div>
                </div>
                <div class="row mb-3">
                    <div class="col-md-7">
                        <input type="text" name="nama3" placeholder="Nama Pemain 3" class="form-control" required>
                    </div>
                    <div class="col-md-5">
                        <input type="number" name="angka3" placeholder="Tebak (1-10)" min="1" max="10" class="form-control" required>
                    </div>
                </div>
                <div class="row mb-3">
                    <div class="col-md-7">
                        <input type="text" name="nama4" placeholder="Nama Pemain 4" class="form-control" required>
                    </div>
                    <div class="col-md-5">
                        <input type="number" name="angka4" placeholder="Tebak (1-10)" min="1" max="10" class="form-control" required>
                    </div>
                </div>
                <div class="d-grid">
                    <button type="submit" class="btn btn-primary">Spin Angka!</button>
                </div>
            </form>
        </div>
    </div>

    <div id="resultsContainer">
        </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script>
document.getElementById('gameForm').addEventListener('submit', function(event) {
    event.preventDefault();

    const form = event.target;
    const pemain = {};
    const angkaTebakan = [];
    const resultsContainer = document.getElementById('resultsContainer');

    // Gather player data
    for (let i = 1; i <= 4; i++) {
        const nama = form.elements[`nama${i}`].value.trim();
        const angka = parseInt(form.elements[`angka${i}`].value);
        if (nama && angka >= 1 && angka <= 10) {
            pemain[nama] = angka;
            angkaTebakan.push(angka);
        }
    }

    // Check if 4 players have submitted valid numbers
    if (Object.keys(pemain).length !== 4) {
        resultsContainer.innerHTML = `<div class="alert alert-warning mt-4 text-center">Harap masukkan nama dan angka untuk 4 pemain!</div>`;
        return;
    }

    // Determine the winning number
    const semuaAngka = Array.from({length: 10}, (_, i) => i + 1);
    const kemungkinan = semuaAngka.filter(angka => !angkaTebakan.includes(angka));

    let hasil;
    if (kemungkinan.length > 0) {
        hasil = kemungkinan[Math.floor(Math.random() * kemungkinan.length)];
    } else {
        resultsContainer.innerHTML = `<div class="alert alert-danger mt-4 text-center">ðŸ˜­ WKWKWK GAK ADA YANG MENANG !!!</div>`;
        return;
    }

    // Find the winners
    const pemenang = [];
    for (const nama in pemain) {
        if (pemain[nama] === hasil) {
            pemenang.push(nama);
        }
    }

    // Animate and display the results
    const spinBoxContent = `<div class="text-center mt-5"><div id="spinBox">0</div></div>`;
    resultsContainer.innerHTML = spinBoxContent;
    document.getElementById('resultSection')?.remove(); // Remove old section if it exists

    const spinBox = document.getElementById('spinBox');
    let count = 0;
    const interval = setInterval(function() {
        spinBox.innerText = Math.floor(Math.random() * 10) + 1;
        count++;
        if (count >= 20) {
            clearInterval(interval);
            spinBox.innerText = hasil;
            
            // Display final result section
            let resultHtml;
            if (pemenang.length > 0) {
                resultHtml = `<p class="alert alert-success">Pemenang: ${pemenang.join(', ')}</p>`;
            } else {
                resultHtml = `<p class="alert alert-danger">ðŸ˜­ WKWKWK GAK ADA YANG MENANG !!!</p>`;
            }

            const finalResultSection = `<div id="resultSection" class="mt-4 text-center">
                <h4>Hasil Angka: <strong>${hasil}</strong></h4>
                ${resultHtml}
            </div>`;
            
            resultsContainer.insertAdjacentHTML('beforeend', finalResultSection);
            document.getElementById('resultSection').style.display = 'block';
        }
    }, 100);
});
</script>
</body>
</html>